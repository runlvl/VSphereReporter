{% extends "base.html" %}

{% block title %}Berichtsansicht - VMware vSphere Reporter{% endblock %}

{% block content %}
<h1 class="my-4">Generierter Bericht</h1>

<div class="alert alert-success">
    <i class="bi bi-check-circle me-2"></i> Bericht wurde erfolgreich generiert!
</div>

<div class="card mb-4">
    <div class="card-header">Berichtsdetails</div>
    <div class="card-body">
        <p><strong>Bericht-ID:</strong> {{ report_id }}</p>
        <p><strong>Generiert am:</strong> {{ report_id[:8] }}, {{ report_id[9:11] }}:{{ report_id[11:13] }}:{{ report_id[13:15] }}</p>
        
        <h5 class="mt-4">Ausgewählte Bereiche</h5>
        <ul>
            {% if selected_options.get('vmware_tools', False) %}
            <li>VMware Tools Status</li>
            {% endif %}
            
            {% if selected_options.get('snapshots', False) %}
            <li>VM-Snapshots</li>
            {% endif %}
            
            {% if selected_options.get('orphaned_vmdks', False) %}
            <li>Verwaiste VMDKs</li>
            {% endif %}
            
            {% if selected_options.get('vm_hardware', False) %}
            <li>VM-Hardware</li>
            {% endif %}
            
            {% if selected_options.get('datastores', False) %}
            <li>Datastores</li>
            {% endif %}
            
            {% if selected_options.get('hosts', False) %}
            <li>ESXi-Hosts</li>
            {% endif %}
            
            {% if selected_options.get('clusters', False) %}
            <li>Cluster</li>
            {% endif %}
        </ul>
    </div>
</div>

<div class="card mb-4">
    <div class="card-header">Herunterladen</div>
    <div class="card-body">
        <div class="d-flex flex-wrap gap-3">
            {% if 'html' in report_files %}
            <a href="{{ url_for('download_report', filename=report_files['html']) }}" class="btn btn-primary">
                <i class="bi bi-file-earmark-code me-2"></i> HTML-Version herunterladen
            </a>
            {% endif %}
            
            {% if 'pdf' in report_files %}
            <a href="{{ url_for('download_report', filename=report_files['pdf']) }}" class="btn btn-danger">
                <i class="bi bi-file-earmark-pdf me-2"></i> PDF-Version herunterladen
            </a>
            {% endif %}
            
            {% if 'docx' in report_files %}
            <a href="{{ url_for('download_report', filename=report_files['docx']) }}" class="btn btn-info">
                <i class="bi bi-file-earmark-word me-2"></i> Word-Version herunterladen
            </a>
            {% endif %}
        </div>
    </div>
</div>

<div class="d-flex justify-content-between mt-5">
    <a href="{{ url_for('dashboard') }}" class="btn btn-outline-secondary">
        <i class="bi bi-arrow-left me-2"></i> Zurück zum Dashboard
    </a>
    <a href="{{ url_for('report_options') }}" class="btn btn-outline-primary">
        <i class="bi bi-plus-circle me-2"></i> Neuen Bericht erstellen
    </a>
</div>

{% if session.get('demo_mode', False) %}
<div class="alert alert-warning mt-4">
    <i class="bi bi-exclamation-triangle me-2"></i> <strong>Demo-Modus:</strong> Die generierten Berichte basieren auf Beispieldaten.
</div>
{% endif %}
{% endblock %}